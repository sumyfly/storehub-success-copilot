# ğŸš€ Customer Success ETLå®ç°æ‰§è¡Œè®¡åˆ’

## ğŸ“– æ–‡æ¡£æ¦‚è¿°

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**åˆ›å»ºæ—¥æœŸ**: 2024-01-20  
**é¢„è®¡å®Œæˆæ—¶é—´**: 1å°æ—¶  
**è´Ÿè´£å›¢é˜Ÿ**: Customer Success Engineering  

---

## ğŸ¯ é¡¹ç›®ç›®æ ‡

### æ€»ä½“ç›®æ ‡
æ„å»ºä¸€ä¸ª**åŸºäºCSVæ•°æ®æºçš„ETLç®¡é“**ï¼Œå°†åŸå§‹ä¸šåŠ¡æ•°æ®è½¬æ¢ä¸ºåŒ…å«Health Scoreçš„Customer SuccessæŒ‡æ ‡ï¼Œæ›¿ä»£å½“å‰çš„Mockæ•°æ®ç³»ç»Ÿã€‚

### æ ¸å¿ƒä»·å€¼
- **æ•°æ®é©±åŠ¨**: ä»ç¡¬ç¼–ç Mockæ•°æ®è½¬å‘çœŸå®æ•°æ®æº
- **æ€§èƒ½ä¼˜åŒ–**: é¢„è®¡ç®—Health Scoreï¼Œæå‡APIå“åº”é€Ÿåº¦
- **å¯æ‰©å±•æ€§**: æ”¯æŒæ–°æ•°æ®æºå’Œè®¡ç®—ç»´åº¦çš„çµæ´»æ‰©å±•
- **ä¸šåŠ¡æ´å¯Ÿ**: æä¾›åŸºäºçœŸå®æ•°æ®çš„Customer Successåˆ†æ

---

## â±ï¸ æ‰§è¡Œæ—¶é—´è¡¨

### æ€»æ—¶é—´åˆ†é…: 60åˆ†é’Ÿ

| é˜¶æ®µ | æ—¶é—´ | æ ¸å¿ƒä»»åŠ¡ | å…³é”®äº¤ä»˜ç‰© |
|------|------|----------|------------|
| **é˜¶æ®µ1** | 15åˆ†é’Ÿ | æ•°æ®æºè®¾è®¡ä¸Mockæ•°æ®åˆ›å»º | 4ä¸ªCSVæ•°æ®æ–‡ä»¶ |
| **é˜¶æ®µ2** | 20åˆ†é’Ÿ | ETLåŸºç¡€æ¶æ„æ­å»º | ETLæ¡†æ¶å’ŒåŸºç¡€ç»„ä»¶ |
| **é˜¶æ®µ3** | 15åˆ†é’Ÿ | Health Scoreè®¡ç®—å¼•æ“é›†æˆ | å®Œæ•´çš„Health Scoreè®¡ç®—æµç¨‹ |
| **é˜¶æ®µ4** | 10åˆ†é’Ÿ | æ•°æ®è¾“å‡ºä¸APIé›†æˆ | å¯ç”¨çš„Customer Successæ•°æ® |

---

## ğŸ“Š æ•°æ®æ¶æ„è®¾è®¡

### CSVæ•°æ®æºè®¾è®¡

#### 1. customers.csv
**ç”¨é€”**: å®¢æˆ·åŸºç¡€ä¿¡æ¯å’Œé™æ€å±æ€§
**å…³é”®å­—æ®µ**:
- customer_id, name, industry, company_size
- customer_type (enterprise/mid_market/startup)
- contract_date, contract_length_months
- payment_status, nps_score

#### 2. sales.csv  
**ç”¨é€”**: é”€å”®äº¤æ˜“å’Œæ”¶å…¥æ•°æ®
**å…³é”®å­—æ®µ**:
- customer_id, deal_date, deal_amount
- deal_stage, account_manager, product_type
- contract_length, renewal_date

#### 3. support.csv
**ç”¨é€”**: å®¢æˆ·æ”¯æŒå’ŒæœåŠ¡æ•°æ®
**å…³é”®å­—æ®µ**:
- ticket_id, customer_id, created_date, resolved_date
- priority, category, satisfaction_score
- agent_id, resolution_time

#### 4. activity.csv
**ç”¨é€”**: ç”¨æˆ·è¡Œä¸ºå’Œäº§å“ä½¿ç”¨æ•°æ®
**å…³é”®å­—æ®µ**:
- customer_id, date, activity_type
- activity_value, user_count, session_duration
- feature_name, usage_depth

### æ•°æ®å…³ç³»è®¾è®¡
```
customers.csv (1) â†â†’ (N) sales.csv
customers.csv (1) â†â†’ (N) support.csv  
customers.csv (1) â†â†’ (N) activity.csv
```

---

## ğŸ—ï¸ ETLæ¶æ„è®¾è®¡

### ç›®å½•ç»“æ„
```
data-pipeline/etl/
â”œâ”€â”€ mock_data/                    # CSVæ•°æ®æº
â”‚   â”œâ”€â”€ customers.csv
â”‚   â”œâ”€â”€ sales.csv
â”‚   â”œâ”€â”€ support.csv
â”‚   â””â”€â”€ activity.csv
â”œâ”€â”€ extractors/                   # æ•°æ®æå–å™¨
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ csv_extractor.py
â”‚   â””â”€â”€ data_validator.py
â”œâ”€â”€ transformers/                 # æ•°æ®è½¬æ¢å™¨
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ metrics_calculator.py
â”‚   â”œâ”€â”€ customer_aggregator.py
â”‚   â””â”€â”€ data_normalizer.py
â”œâ”€â”€ calculators/                  # Health Scoreè®¡ç®—å¼•æ“
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ health_score_engine.py
â”‚   â”œâ”€â”€ dimension_calculators.py
â”‚   â””â”€â”€ weight_manager.py
â”œâ”€â”€ loaders/                      # æ•°æ®åŠ è½½å™¨
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ json_loader.py
â”‚   â””â”€â”€ api_updater.py
â”œâ”€â”€ output/                       # è¾“å‡ºç›®å½•
â”‚   â”œâ”€â”€ customer_success_data.json
â”‚   â”œâ”€â”€ health_scores_history.json
â”‚   â””â”€â”€ risk_alerts.json
â”œâ”€â”€ config/                       # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ etl_config.yaml
â”‚   â””â”€â”€ weights_config.yaml
â””â”€â”€ pipeline.py                   # ä¸»ETLåè°ƒå™¨
```

### æ•°æ®æµè®¾è®¡
```
ğŸ“Š ETL Data Flow:

CSV Files â†’ Extract â†’ Transform â†’ Calculate â†’ Load â†’ API
    â†“         â†“         â†“          â†“        â†“      â†“
customers  Read &   Aggregate   Health   JSON   Updated
sales     Validate  Customer    Score   Output   API
support    Data     Metrics   Compute          Response
activity
```

---

## ğŸ§® Health Scoreè®¡ç®—é›†æˆ

### æ ¸å¿ƒç®—æ³•é›†æˆ
**å¤ç”¨ç°æœ‰health_engine.pyçš„8ç»´åº¦è®¡ç®—é€»è¾‘**:

#### è®¡ç®—ç»´åº¦ä¸æ•°æ®æºæ˜ å°„
| Health Scoreç»´åº¦ | ä¸»è¦æ•°æ®æº | è®¡ç®—é€»è¾‘ |
|-----------------|------------|----------|
| **Usage** | activity.csv | ç™»å½•é¢‘ç‡ + åŠŸèƒ½ä½¿ç”¨æ·±åº¦ |
| **Engagement** | activity.csv + customers.csv | å‚ä¸åº¦åˆ†æ•° + å…¥èŒå®ŒæˆçŠ¶æ€ |
| **Support** | support.csv | å·¥å•æ•°é‡ + è§£å†³æ•ˆç‡ + æ»¡æ„åº¦ |
| **Payment** | sales.csv + customers.csv | ä»˜æ¬¾çŠ¶æ€ + ç»­è´¹è®°å½• |
| **Adoption** | activity.csv | æ ¸å¿ƒ/é«˜çº§/é›†æˆåŠŸèƒ½ä½¿ç”¨ç‡ |
| **Satisfaction** | customers.csv + support.csv | NPSåˆ†æ•° + æ”¯æŒæ»¡æ„åº¦ |
| **Lifecycle** | customers.csv | åˆåŒæœŸé™ + å®¢æˆ·æˆç†Ÿåº¦ |
| **Value** | sales.csv | MRR + åˆåŒä»·å€¼ |

### æƒé‡ç­–ç•¥
**åŸºäºå®¢æˆ·ç±»å‹çš„å·®å¼‚åŒ–æƒé‡**:

| ç»´åº¦ | Enterprise | Mid-Market | Startup | æƒé‡ä¾æ® |
|------|------------|------------|---------|----------|
| Usage | 15% | 20% | 25% | åˆåˆ›å…¬å¸æ›´é‡è§†äº§å“ä½¿ç”¨ |
| Payment | 20% | 15% | 10% | ä¼ä¸šå®¢æˆ·ä»˜æ¬¾ç¨³å®šæ€§æ›´é‡è¦ |
| Support | 15% | 15% | 10% | ä¼ä¸šå®¢æˆ·æ”¯æŒéœ€æ±‚æ›´å¤æ‚ |
| Engagement | 10% | 15% | 20% | åˆåˆ›å…¬å¸éœ€è¦æ›´é«˜å‚ä¸åº¦ |

### Health Scoreç­‰çº§åˆ†ç±»
| åˆ†æ•°èŒƒå›´ | ç­‰çº§ | é£é™©çŠ¶æ€ | å»ºè®®è¡ŒåŠ¨ |
|---------|------|----------|----------|
| 80-100% | Excellent | æ‰©å±•æœºä¼š | äº¤å‰é”€å”®ã€æ¡ˆä¾‹ç ”ç©¶ |
| 60-80% | Good | ç¨³å®šçŠ¶æ€ | å®šæœŸæ£€æŸ¥ã€ä»·å€¼ç¡®è®¤ |
| 30-60% | At Risk | éœ€è¦å…³æ³¨ | ä¸»åŠ¨å¹²é¢„ã€æ”¹è¿›è®¡åˆ’ |
| 0-30% | Critical | æµå¤±é£é™© | ç´§æ€¥ä¼šè®®ã€æŒ½å›ç­–ç•¥ |

---

## ğŸ”§ æŠ€æœ¯å®ç°ç»†èŠ‚

### é˜¶æ®µ1: æ•°æ®æºåˆ›å»º (15åˆ†é’Ÿ)

#### Mockæ•°æ®ç”Ÿæˆç­–ç•¥
- **å®¢æˆ·æ•°é‡**: 30ä¸ªå®¢æˆ· (Enterprise: 10, Mid-Market: 15, Startup: 5)
- **æ—¶é—´èŒƒå›´**: 6ä¸ªæœˆå†å²æ•°æ® (2023-07 è‡³ 2024-01)
- **æ•°æ®å¯†åº¦**: 
  - Sales: æ¯å®¢æˆ·å¹³å‡3ä¸ªäº¤æ˜“è®°å½•
  - Support: æ¯å®¢æˆ·æ¯æœˆ1ä¸ªå·¥å•
  - Activity: æ¯å®¢æˆ·æ¯å¤©1-3æ¡æ´»åŠ¨è®°å½•

#### æ•°æ®çœŸå®æ€§ä¿è¯
- ç¬¦åˆä¸šåŠ¡é€»è¾‘çš„æ•°æ®å…³è”
- åˆç†çš„æ•°å€¼åˆ†å¸ƒå’ŒèŒƒå›´
- åæ˜ ä¸åŒå®¢æˆ·ç±»å‹çš„å·®å¼‚ç‰¹å¾
- åŒ…å«æ­£å¸¸ã€é£é™©ã€ä¼˜ç§€å®¢æˆ·çš„å¤šæ ·åŒ–åœºæ™¯

### é˜¶æ®µ2: ETLåŸºç¡€æ¶æ„ (20åˆ†é’Ÿ)

#### æ•°æ®æå–å™¨åŠŸèƒ½
- **CSVè¯»å–å™¨**: ç»Ÿä¸€æ¥å£è¯»å–æ‰€æœ‰CSVæ–‡ä»¶
- **æ•°æ®éªŒè¯å™¨**: æ£€æŸ¥å¿…è¦å­—æ®µã€æ•°æ®ç±»å‹ã€å–å€¼èŒƒå›´
- **å…³è”éªŒè¯å™¨**: ç¡®ä¿å®¢æˆ·IDåœ¨æ‰€æœ‰æ•°æ®æºä¸­å­˜åœ¨
- **æ—¶é—´è¿‡æ»¤å™¨**: æ”¯æŒæŒ‰æ—¶é—´èŒƒå›´æå–æ•°æ®

#### æ•°æ®è½¬æ¢å™¨åŠŸèƒ½
- **å®¢æˆ·èšåˆå™¨**: æŒ‰å®¢æˆ·IDèšåˆå¤šæºæ•°æ®
- **æŒ‡æ ‡è®¡ç®—å™¨**: è®¡ç®—åŸºç¡€ä¸šåŠ¡æŒ‡æ ‡
- **æ•°æ®æ ‡å‡†åŒ–å™¨**: ç»Ÿä¸€æ•°æ®æ ¼å¼å’Œå•ä½
- **å¼‚å¸¸å¤„ç†å™¨**: å¤„ç†ç¼ºå¤±å€¼å’Œå¼‚å¸¸æ•°æ®

### é˜¶æ®µ3: Health Scoreè®¡ç®— (15åˆ†é’Ÿ)

#### ç»´åº¦è®¡ç®—å™¨è®¾è®¡
```python
# ä¼ªä»£ç ç¤ºä¾‹ç»“æ„
class DimensionCalculators:
    def calculate_usage_score(customer_data):
        # åŸºäºactivity.csvè®¡ç®—ä½¿ç”¨é¢‘ç‡å’Œæ·±åº¦
        
    def calculate_support_score(customer_data):
        # åŸºäºsupport.csvè®¡ç®—æ”¯æŒå¥åº·åº¦
        
    def calculate_payment_score(customer_data):
        # åŸºäºsales.csvå’Œcustomers.csvè®¡ç®—ä»˜æ¬¾å¥åº·åº¦
```

#### Health Scoreå¼•æ“é›†æˆ
- **é€‚é…å™¨æ¨¡å¼**: å°†ETLæ•°æ®é€‚é…ä¸ºç°æœ‰health_engineå…¼å®¹æ ¼å¼
- **é…ç½®é©±åŠ¨**: æ”¯æŒæƒé‡å’Œé˜ˆå€¼çš„çµæ´»é…ç½®
- **å†å²è·Ÿè¸ª**: è®°å½•Health Scoreçš„å†å²å˜åŒ–
- **è¶‹åŠ¿åˆ†æ**: è®¡ç®—åˆ†æ•°å˜åŒ–è¶‹åŠ¿å’Œé¢„æµ‹

### é˜¶æ®µ4: æ•°æ®è¾“å‡ºä¸é›†æˆ (10åˆ†é’Ÿ)

#### è¾“å‡ºæ•°æ®ç»“æ„
```json
{
  "customers": [
    {
      "customer_id": "CUST001",
      "customer_name": "Tech Corp",
      "health_score": 0.85,
      "health_grade": "excellent",
      "risk_level": "low",
      "score_breakdown": {
        "usage": 0.90,
        "engagement": 0.85,
        "support": 0.95,
        "payment": 1.00,
        "adoption": 0.80,
        "satisfaction": 0.90,
        "lifecycle": 0.85,
        "value": 0.75
      },
      "trend": {
        "direction": "improving",
        "change_30d": 0.05,
        "forecast_30d": 0.88
      },
      "alerts": [...],
      "recommendations": [...],
      "data_sources": ["sales", "support", "activity"],
      "calculated_at": "2024-01-20T10:00:00Z"
    }
  ],
  "summary": {
    "total_customers": 30,
    "avg_health_score": 0.75,
    "distribution": {
      "excellent": 8,
      "good": 12,
      "at_risk": 7,
      "critical": 3
    }
  }
}
```

#### APIé›†æˆç­–ç•¥
- **æ•°æ®æºåˆ‡æ¢**: ä¿®æ”¹ç°æœ‰APIç«¯ç‚¹ä½¿ç”¨ETLè¾“å‡º
- **ç¼“å­˜æœºåˆ¶**: å†…å­˜ç¼“å­˜ETLæ•°æ®æå‡æ€§èƒ½
- **å¢é‡æ›´æ–°**: æ”¯æŒETLæ•°æ®çš„å¢é‡åˆ·æ–°
- **å‘åå…¼å®¹**: ä¿æŒç°æœ‰APIæ¥å£ä¸å˜

---

## ğŸ“ˆ æ€§èƒ½ä¸è´¨é‡ä¿è¯

### æ€§èƒ½ç›®æ ‡
- **ETLå¤„ç†æ—¶é—´**: < 30ç§’ (30å®¢æˆ·æ•°æ®)
- **APIå“åº”æ—¶é—´**: < 100ms (Health ScoreæŸ¥è¯¢)
- **æ•°æ®å‡†ç¡®æ€§**: 99.9% (ä¸äººå·¥è®¡ç®—å¯¹æ¯”)
- **ç³»ç»Ÿå¯ç”¨æ€§**: 99.5% (APIæœåŠ¡ç¨³å®šæ€§)

### æ•°æ®è´¨é‡æ§åˆ¶
- **å®Œæ•´æ€§æ£€æŸ¥**: ç¡®ä¿å…³é”®å­—æ®µä¸ç¼ºå¤±
- **ä¸€è‡´æ€§éªŒè¯**: è·¨æ•°æ®æºçš„é€»è¾‘ä¸€è‡´æ€§
- **å‡†ç¡®æ€§éªŒè¯**: Health Scoreè®¡ç®—ç»“æœå‡†ç¡®æ€§
- **æ—¶æ•ˆæ€§ä¿è¯**: æ•°æ®æ›´æ–°çš„åŠæ—¶æ€§

### ç›‘æ§æŒ‡æ ‡
- ETLæ‰§è¡ŒæˆåŠŸç‡å’Œæ‰§è¡Œæ—¶é—´
- Health Scoreåˆ†å¸ƒå’Œå¼‚å¸¸å€¼æ£€æµ‹
- APIè°ƒç”¨é‡å’Œå“åº”æ—¶é—´
- æ•°æ®æºæ–‡ä»¶å¤§å°å’Œè®°å½•æ•°é‡

---

## ğŸš€ éƒ¨ç½²ä¸ç»´æŠ¤

### éƒ¨ç½²æ­¥éª¤
1. **ç¯å¢ƒå‡†å¤‡**: å®‰è£…ä¾èµ–åŒ… (pandas, numpy)
2. **ç›®å½•åˆ›å»º**: å»ºç«‹ETLç›®å½•ç»“æ„
3. **é…ç½®æ–‡ä»¶**: è®¾ç½®ETLå’Œæƒé‡é…ç½®
4. **æ•°æ®å¯¼å…¥**: éƒ¨ç½²Mock CSVæ–‡ä»¶
5. **åŠŸèƒ½æµ‹è¯•**: éªŒè¯ETLæµç¨‹å’ŒAPIé›†æˆ
6. **æ€§èƒ½æµ‹è¯•**: ç¡®è®¤å“åº”æ—¶é—´å’Œå‡†ç¡®æ€§

### ç»´æŠ¤è®¡åˆ’
- **æ—¥å¸¸ç›‘æ§**: æ£€æŸ¥ETLæ‰§è¡Œæ—¥å¿—å’Œé”™è¯¯
- **æ•°æ®æ ¡éªŒ**: å®šæœŸéªŒè¯Health Scoreå‡†ç¡®æ€§
- **æ€§èƒ½ä¼˜åŒ–**: æ ¹æ®ä½¿ç”¨æƒ…å†µè°ƒä¼˜æ€§èƒ½
- **åŠŸèƒ½æ‰©å±•**: æ ¹æ®ä¸šåŠ¡éœ€æ±‚å¢åŠ æ–°ç»´åº¦

---

## ğŸ“‹ éªŒæ”¶æ ‡å‡†

### æŠ€æœ¯éªŒæ”¶
- [ ] ETLæµç¨‹èƒ½æˆåŠŸå¤„ç†æ‰€æœ‰CSVæ•°æ®æº
- [ ] Health Scoreè®¡ç®—ç»“æœä¸ç°æœ‰ç®—æ³•ä¸€è‡´
- [ ] APIå“åº”æ—¶é—´æ»¡è¶³æ€§èƒ½è¦æ±‚
- [ ] è¾“å‡ºæ•°æ®æ ¼å¼ç¬¦åˆè§„èŒƒè¦æ±‚

### ä¸šåŠ¡éªŒæ”¶
- [ ] 30ä¸ªå®¢æˆ·çš„Health Scoreåˆ†å¸ƒåˆç†
- [ ] é£é™©å®¢æˆ·è¯†åˆ«å‡†ç¡®
- [ ] æ‰©å±•æœºä¼šè¯†åˆ«æœ‰æ•ˆ
- [ ] Dashboardæ˜¾ç¤ºæ­£å¸¸

### è´¨é‡éªŒæ”¶
- [ ] æ•°æ®å®Œæ•´æ€§100%æ— ç¼ºå¤±
- [ ] Health Scoreè®¡ç®—å‡†ç¡®æ€§ > 99%
- [ ] ETLæ‰§è¡Œç¨³å®šæ€§ > 99%
- [ ] APIæœåŠ¡å¯ç”¨æ€§ > 99.5%

---

## ğŸ¯ é¡¹ç›®é£é™©ä¸ç¼“è§£ç­–ç•¥

### ä¸»è¦é£é™©
| é£é™©é¡¹ | å½±å“ç¨‹åº¦ | å‘ç”Ÿæ¦‚ç‡ | ç¼“è§£ç­–ç•¥ |
|--------|----------|----------|----------|
| æ•°æ®è´¨é‡é—®é¢˜ | é«˜ | ä¸­ | å¢å¼ºæ•°æ®éªŒè¯å’Œå¼‚å¸¸å¤„ç† |
| æ€§èƒ½ä¸è¾¾æ ‡ | ä¸­ | ä½ | é¢„ç•™æ€§èƒ½ä¼˜åŒ–æ—¶é—´ |
| APIé›†æˆå¤±è´¥ | é«˜ | ä½ | ä¿ç•™Mockæ•°æ®å¤‡é€‰æ–¹æ¡ˆ |
| è®¡ç®—é€»è¾‘é”™è¯¯ | é«˜ | ä½ | å……åˆ†æµ‹è¯•å’Œä»£ç å®¡æŸ¥ |

### åº”æ€¥é¢„æ¡ˆ
- **æ•°æ®å¤‡ä»½**: ä¿ç•™åŸå§‹Mockæ•°æ®ä½œä¸ºå›é€€æ–¹æ¡ˆ
- **ç°åº¦å‘å¸ƒ**: å…ˆåœ¨æµ‹è¯•ç¯å¢ƒéªŒè¯å†ç”Ÿäº§éƒ¨ç½²
- **ç›‘æ§å‘Šè­¦**: å®æ—¶ç›‘æ§å…³é”®æŒ‡æ ‡å¼‚å¸¸
- **å¿«é€Ÿå›æ»š**: æ”¯æŒå¿«é€Ÿå›é€€åˆ°Mockæ•°æ®æ¨¡å¼

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Customer Success Platform Architecture](./architecture/)
- [Health Score Algorithm Documentation](./api/)
- [API Integration Guide](./api/)
- [Data Pipeline Best Practices](./deployment/)

---

**æ–‡æ¡£ç»´æŠ¤**: æœ¬æ–‡æ¡£å°†éšé¡¹ç›®è¿›å±•æŒç»­æ›´æ–°  
**ä¸‹æ¬¡æ›´æ–°**: ETLå®æ–½å®Œæˆåè¿›è¡Œç»“æœæ€»ç»“å’Œç»éªŒè®°å½• 